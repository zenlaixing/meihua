<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>梅花易数在线占卜</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .container {
            width: 90%;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        label {
            font-size: 1.2em;
        }
        input {
            padding: 10px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px;
            font-size: 1.2em;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 30px;
            padding: 15px;
            background-color: #e8f5e9;
            border-radius: 5px;
        }
        .error {
            color: red;
            text-align: center;
        }
        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        /* Background colors for numbers 0-7 */
        .bg-0 { background-color: #ffcccc; } /* Light Red */
        .bg-1 { background-color: #ccffcc; } /* Light Green */
        .bg-2 { background-color: #ccccff; } /* Light Blue */
        .bg-3 { background-color: #ffffcc; } /* Light Yellow */
        .bg-4 { background-color: #ffccff; } /* Light Purple */
        .bg-5 { background-color: #ccffff; } /* Light Cyan */
        .bg-6 { background-color: #ffff99; } /* Light Yellow-Green */
        .bg-7 { background-color: #ffcce6; } /* Light Pink */
        .highlight {
            border: 3px solid black;
            animation: flash 1s infinite;
        }
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .metal { color: gold; }
        .wood { color: green; }
        .water { color: blue; }
        .fire { color: red; }
        .earth { color: brown; }
        footer {
            text-align: center;
            margin-top: auto;
            padding: 20px 0;
            background-color: #f4f4f4;
            color: #666;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>梅花易数在线占卜</h1>
    <form id="divinationForm">
        <label for="x">请输入随机数字 (0-99):</label>
        <input type="number" id="x" name="x" min="0" max="99" required>
        <label for="y">请输入随机数字 (0-99):</label>
        <input type="number" id="y" name="y" min="0" max="99" required>
        <button type="submit">默念所求问题点击占卜</button>
    </form>
    <div id="result" class="result" style="display:none;">
        <h3>占卜结果:</h3>
        <p><strong>上卦:</strong> <span id="upperTrigram"></span></p>
        <p><strong>下卦:</strong> <span id="lowerTrigram"></span></p>
        <p><strong>六爻卦象:</strong> <span id="hexagramSymbol"></span> <span id="hexagramName"></span></p>
        <p><strong>生克关系:</strong> <span id="relationship"></span></p>
        <p><strong>解释:</strong> <span id="explanation"></span></p>
        <p><strong>卦辞:</strong> <span id="hexagramJudgment"></span></p>
        <table>
            <thead>
                <tr>
                    <th colspan="9">生克关系表</th>
                </tr>
                <tr>
                    <th>下卦\上卦</th>
                    <th>0<br>(坤)<br>(土)</th>
                    <th>1<br>(乾)<br>(金)</th>
                    <th>2<br>(兑)<br>(金)</th>
                    <th>3<br>(离)<br>(火)</th>
                    <th>4<br>(震)<br>(木)</th>
                    <th>5<br>(巽)<br>(木)</th>
                    <th>6<br>(坎)<br>(水)</th>
                    <th>7<br>(艮)<br>(土)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>0<br>(坤)<br>(土)</td>
                    <td class="bg-0">0</td>
                    <td class="bg-4">4</td>
                    <td class="bg-4">4</td>
                    <td class="bg-3">3</td>
                    <td class="bg-2">2</td>
                    <td class="bg-2">2</td>
                    <td class="bg-1">1</td>
                    <td class="bg-0">0</td>
                </tr>
                <tr>
                    <td>1<br>(乾)<br>(金)</td>
                    <td class="bg-3">3</td>
                    <td class="bg-0">0</td>
                    <td class="bg-0">0</td>
                    <td class="bg-2">2</td>
                    <td class="bg-1">1</td>
                    <td class="bg-1">1</td>
                    <td class="bg-4">4</td>
                    <td class="bg-3">3</td>
                </tr>
                <tr>
                    <td>2<br>(兑)<br>(金)</td>
                    <td class="bg-3">3</td>
                    <td class="bg-0">0</td>
                    <td class="bg-0">0</td>
                    <td class="bg-2">2</td>
                    <td class="bg-1">1</td>
                    <td class="bg-1">1</td>
                    <td class="bg-4">4</td>
                    <td class="bg-3">3</td>
                </tr>
                <tr>
                    <td>3<br>(离)<br>(火)</td>
                    <td class="bg-4">4</td>
                    <td class="bg-1">1</td>
                    <td class="bg-1">1</td>
                    <td class="bg-0">0</td>
                    <td class="bg-3">3</td>
                    <td class="bg-3">3</td>
                    <td class="bg-2">2</td>
                    <td class="bg-4">4</td>
                </tr>
                <tr>
                    <td>4<br>(震)<br>(木)</td>
                    <td class="bg-1">1</td>
                    <td class="bg-2">2</td>
                    <td class="bg-2">2</td>
                    <td class="bg-4">4</td>
                    <td class="bg-0">0</td>
                    <td class="bg-0">0</td>
                    <td class="bg-3">3</td>
                    <td class="bg-1">1</td>
                </tr>
                <tr>
                    <td>5<br>(巽)<br>(木)</td>
                    <td class="bg-1">1</td>
                    <td class="bg-2">2</td>
                    <td class="bg-2">2</td>
                    <td class="bg-4">4</td>
                    <td class="bg-0">0</td>
                    <td class="bg-0">0</td>
                    <td class="bg-3">3</td>
                    <td class="bg-1">1</td>
                </tr>
                <tr>
                    <td>6<br>(坎)<br>(水)</td>
                    <td class="bg-2">2</td>
                    <td class="bg-3">3</td>
                    <td class="bg-3">3</td>
                    <td class="bg-1">1</td>
                    <td class="bg-4">4</td>
                    <td class="bg-4">4</td>
                    <td class="bg-0">0</td>
                    <td class="bg-2">2</td>
                </tr>
                <tr>
                    <td>7<br>(艮)<br>(土)</td>
                    <td class="bg-0">0</td>
                    <td class="bg-4">4</td>
                    <td class="bg-4">4</td>
                    <td class="bg-3">3</td>
                    <td class="bg-2">2</td>
                    <td class="bg-2">2</td>
                    <td class="bg-1">1</td>
                    <td class="bg-2">2</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="errorMessage" class="error" style="display:none;"></div>
</div>

<footer>
    Power by bobochi
</footer>

<script>
    const hexagrams = [
        // 下卦 0 (坤), 上卦 0 (坤)
        { symbol: "䷁", name: "坤为地", judgment: "元亨 利牝马之贞 君子有攸往 先迷后得主利 勤俭不贫" },
        // 下卦 0 (坤), 上卦 1 (乾)
        { symbol: "䷋", name: "天地否", judgment: "否闭不利君子贞 小人吉" },
        // 下卦 0 (坤), 上卦 2 (兑)
        { symbol: "䷬", name: "泽地萃", judgment: "萃亨王假有庙 行成思慎 动不渝 福禄无咎" },
        // 下卦 0 (坤), 上卦 3 (离)
        { symbol: "䷢", name: "火地晋", judgment: "晋如鼫鼠 百谷丰登 文王与女 得其资币 悔亡故志" },
        // 下卦 0 (坤), 上卦 4 (震)
        { symbol: "䷏", name: "雷地豫", judgment: "豫谦顺以动 领会大中 用行庆 大有庆" },
        // 下卦 0 (坤), 上卦 5 (巽)
        { symbol: "䷓", name: "风地观", judgment: "观盥而不荐 有孚颙若 中正以观天下 观民设教" },
        // 下卦 0 (坤), 上卦 6 (坎)
        { symbol: "䷇", name: "水地比", judgment: "比吉原筮元永 无所不利 不宁方来 在系匪寇 获从事去宗" },
        // 下卦 0 (坤), 上卦 7 (艮)
        { symbol: "䷖", name: "山地剥", judgment: "剥不利有攸往 极小人哉 未可长也" },

        // 下卦 1 (乾), 上卦 0 (坤)
        { symbol: "䷊", name: "地天泰", judgment: "泰小往不吉 大往吉 正吉无咎" },
        // 下卦 1 (乾), 上卦 1 (乾)
        { symbol: "䷀", name: "乾为天", judgment: "乾元亨 利贞" },
        // 下卦 1 (乾), 上卦 2 (兑)
        { symbol: "䷪", name: "泽天夬", judgment: "夬扬于王庭 包羞涩缩 出涕沱 若号 无咎" },
        // 下卦 1 (乾), 上卦 3 (离)
        { symbol: "䷍", name: "火天大有", judgment: "大有元亨 天道酬勤" },
        // 下卦 1 (乾), 上卦 4 (震)
        { symbol: "䷡", name: "雷天大壮", judgment: "大壮利贞" },
        // 下卦 1 (乾), 上卦 5 (巽)
        { symbol: "䷈", name: "风天小畜", judgment: "小畜亨 积善家富 心自慎 家必自慎" },
        // 下卦 1 (乾), 上卦 6 (坎)
        { symbol: "䷄", name: "水天需", judgment: "需有台 不速之客三人来 不速之客一人来 盘庚之迁" },
        // 下卦 1 (乾), 上卦 7 (艮)
        { symbol: "䷙", name: "山天大畜", judgment: "大畜利贞 不家食吉 贞不复吉" },

        // 下卦 2 (兑), 上卦 0 (坤)
        { symbol: "䷒", name: "地泽临", judgment: "临元亨 利贞 如履薄冰" },
        // 下卦 2 (兑), 上卦 1 (乾)
        { symbol: "䷉", name: "天泽履", judgment: "履虎尾不咥人亨" },
        // 下卦 2 (兑), 上卦 2 (兑)
        { symbol: "䷹", name: "兑为泽", judgment: "兑亨 利贞" },
        // 下卦 2 (兑), 上卦 3 (离)
        { symbol: "䷥", name: "火泽睽", judgment: "睽小事吉 大事凶 至晦亨" },
        // 下卦 2 (兑), 上卦 4 (震)
        { symbol: "䷦", name: "雷泽归妹", judgment: "归妹征凶 无攸利" },
        // 下卦 2 (兑), 上卦 5 (巽)
        { symbol: "䷼", name: "风泽中孚", judgment: "中孚豚鱼吉 王用亨于岐山 小人得尚 或锡眚有孚" },
        // 下卦 2 (兑), 上卦 6 (坎)
        { symbol: "䷻", name: "水泽节", judgment: "节亨 苦节不可贞" },
        // 下卦 2 (兑), 上卦 7 (艮)
        { symbol: "䷨", name: "山泽损", judgment: "损亨 不失老谋 可贞利有攸往" },

        // 下卦 3 (离), 上卦 0 (坤)
        { symbol: "䷣", name: "地火明夷", judgment: "明夷垂 winged things flying away 是非不明" },
        // 下卦 3 (离), 上卦 1 (乾)
        { symbol: "䷌", name: "天火同人", judgment: "同人于野 亨 利涉大川 不见大人" },
        // 下卦 3 (离), 上卦 2 (兑)
        { symbol: "䷰", name: "泽火革", judgment: "革巳日乃孚 方悔吝 无咎" },
        // 下卦 3 (离), 上卦 3 (离)
        { symbol: "䷝", name: "离为火", judgment: "离利贞 巫咸利用禴祭" },
        // 下卦 3 (离), 上卦 4 (震)
        { symbol: "䷶", name: "雷火丰", judgment: "丰亨 王假之勿忧 日宜变" },
        // 下卦 3 (离), 上卦 5 (巽)
        { symbol: "䷪", name: "风火家人", judgment: "家人利女贞" },
        // 下卦 3 (离), 上卦 6 (坎)
        { symbol: "䷾", name: "水火既济", judgment: "既济亨 小者亨 大者陨命" },
        // 下卦 3 (离), 上卦 7 (艮)
        { symbol: "䷕", name: "山火贲", judgment: "贲亨 小白告回归应 大赤告荒" },

        // 下卦 4 (震), 上卦 0 (坤)
        { symbol: "䷗", name: "地雷复", judgment: "复亨出入无疾 治器利用回向" },
        // 下卦 4 (震), 上卦 1 (乾)
        { symbol: "䷘", name: "天雷无妄", judgment: "无妄可贞 无妄行有眚 悔亡有获" },
        // 下卦 4 (震), 上卦 2 (兑)
        { symbol: "䷐", name: "泽雷随", judgment: "随时之义" },
        // 下卦 4 (震), 上卦 3 (离)
        { symbol: "䷔", name: "火雷噬嗑", judgment: "噬嗑亨 利贞 不信有孚" },
        // 下卦 4 (震), 上卦 4 (震)
        { symbol: "䷲", name: "震为雷", judgment: "震亨 惧出乎门 宜笑言 名声闻 富有功" },
        // 下卦 4 (震), 上卦 5 (巽)
        { symbol: "䷩", name: "风雷益", judgment: "益亨 利有攸往 自外来者不穷 东邻杀牛不如西邻之禴祭 实受其福" },
        // 下卦 4 (震), 上卦 6 (坎)
        { symbol: "䷂", name: "水雷屯", judgment: "屯初九磐桓 大习坎 利居贞 有利于去 乘马班如 卸装徒步 得妾以其子 无咎 轻而往 重而来 勤俭不贫" },
        // 下卦 4 (震), 上卦 7 (艮)
        { symbol: "䷚", name: "山雷颐", judgment: "颐贞吉 内省不疚 利见大人" },

        // 下卦 5 (巽), 上卦 0 (坤)
        { symbol: "䷭", name: "地风升", judgment: "升元亨 用见大人 君子以顺德 教民七政" },
        // 下卦 5 (巽), 上卦 1 (乾)
        { symbol: "䷫", name: "天风姤", judgment: "姤女壮 不利于男 子反之 女进是谓之得男" },
        // 下卦 5 (巽), 上卦 2 (兑)
        { symbol: "䷛", name: "泽风大过", judgment: "大过栋桡利有攸往 匪丧厥首 凶" },
        // 下卦 5 (巽), 上卦 3 (离)
        { symbol: "䷱", name: "火风鼎", judgment: "鼎元亨 利贞" },
        // 下卦 5 (巽), 上卦 4 (震)
        { symbol: "䷟", name: "雷风恒", judgment: "恒亨 无咎 利贞 恒先柔后刚" },
        // 下卦 5 (巽), 上卦 5 (巽)
        { symbol: "☴", name: "巽为风", judgment: "巽亨 柔来 进退 自邑告命 有孚德交吉" },
        // 下卦 5 (巽), 上卦 6 (坎)
        { symbol: "䷯", name: "水风井", judgment: "井，改邑不改井，无丧无得，往来井井井。改邑不改井，无丧无得。往来井井。汔至，亦未繘井，羸其瓶，凶" },
        // 下卦 5 (巽), 上卦 7 (艮)
        { symbol: "䷑", name: "山风蛊", judgment: "蛊元亨 利涉大川 先甲三日 後甲三日" },

        // 下卦 6 (坎), 上卦 0 (坤)
        { symbol: "䷃", name: "地水师", judgment: "师贞丈人 君子以容" },
        // 下卦 6 (坎), 上卦 1 (乾)
        { symbol: "䷅", name: "天水讼", judgment: "讼有孚窒惕中吉 彼岸从终吉" },
        // 下卦 6 (坎), 上卦 2 (兑)
        { symbol: "䷞", name: "泽水困", judgment: "困亨 时来有悔 解朋盍簪" },
        // 下卦 6 (坎), 上卦 3 (离)
        { symbol: "䷿", name: "火水未济", judgment: "未济亨 小狐汔济濡其尾 无攸利" },
        // 下卦 6 (坎), 上卦 4 (震)
        { symbol: "䷧", name: "雷水解", judgment: "解除免邪 无咎" },
        // 下卦 6 (坎), 上卦 5 (巽)
        { symbol: "䷺", name: "风水涣", judgment: "涣亨 行有不得 惧涂 属其财 亨" },
        // 下卦 6 (坎), 上卦 6 (坎)
        { symbol: "䷄", name: "坎为水", judgment: "习坎有孚维心亨 行有不得 见险而能止" },
        // 下卦 6 (坎), 上卦 7 (艮)
        { symbol: "䷦", name: "山水蹇", judgment: "蹇利西南 拜至于吉" },

        // 下卦 7 (艮), 上卦 0 (坤)
        { symbol: "䷎", name: "地山谦", judgment: "谦亨 君子有终 用涉大川 弛弓 缺弧 以其知犯难 既往不追" },
        // 下卦 7 (艮), 上卦 1 (乾)
        { symbol: "䷠", name: "天山遁", judgment: "遁亨 知进而不知退 乱而走" },
        // 下卦 7 (艮), 上卦 2 (兑)
        { symbol: "䷚", name: "泽山咸", judgment: "咸亨 利贞 泻泽 施于阳施于阴" },
        // 下卦 7 (艮), 上卦 3 (离)
        { symbol: "䷷", name: "火山旅", judgment: "旅小亨 利休咎 发怒贞" },
        // 下卦 7 (艮), 上卦 4 (震)
        { symbol: "䷽", name: "雷山小过", judgment: "小过亨 履错之敬" },
        // 下卦 7 (艮), 上卦 5 (巽)
        { symbol: "䷴", name: "风山渐", judgment: "渐亨 进而高 用宫室 不可不慎" },
        // 下卦 7 (艮), 上卦 6 (坎)
        { symbol: "䷦", name: "水山蹇", judgment: "蹇利西南 拜至于吉" },
        // 下卦 7 (艮), 上卦 7 (艮)
        { symbol: "䷳", name: "艮为山", judgment: "艮彖曰 艮艮其背 不获其身 行其庭不见其人 无实无华" }
    ];

    function cl() {
        const reg = new RegExp("^[0-9]*$");
        const x = document.getElementById("x").value.trim();
        const y = document.getElementById("y").value.trim();
        if (x.length < 1 || y.length < 1 || !reg.test(x) || !reg.test(y)) {
            document.getElementById('errorMessage').textContent = "请输入有效的数字，范围为0到99。";
            document.getElementById('errorMessage').style.display = "block";
            return;
        }
        const c = (Number(x) + Number(y)) % 6;
        // 上卦
        const upperTrigram = x % 8;
        // 下卦
        const lowerTrigram = y % 8;
        
        const trigramNames = ["坤", "乾", "兑", "离", "震", "巽", "坎", "艮"];
        const trigramElements = ["土", "金", "金", "火", "木", "木", "水", "土"];
        const trigramElementClasses = ["earth", "metal", "metal", "fire", "wood", "wood", "water", "earth"];
        const trigramSymbols = ["☷", "☰", "☱", "☲", "☳", "☴", "☵", "☶"];
        
       

        const X = [
            "次吉，70分。外部环境“比合”自己：此事顺心顺意，百无禁忌。",
            "中吉，50分。自己“克”外部环境：自己能力足以完成达成心愿，但需要付出努力。",
            "大凶，10分。外部环境“克”自己：此事难成，有阻力，多坎坷。",
            "大吉，90分。外部环境“生”自己：此事可谋，有人帮扶、促进。",
            "小凶，30分。自己“生”外部环境：此事耗精力，需付出时间精力钱财方可成。"
        ];
        // 生克关系表
        const Y = [
            [0, 4, 4, 3, 2, 2, 1, 0],
            [3, 0, 0, 2, 1, 1, 4, 3],
            [3, 0, 0, 2, 1, 1, 4, 3],
            [4, 1, 1, 0, 3, 3, 2, 4],
            [1, 2, 2, 4, 0, 0, 3, 1],
            [1, 2, 2, 4, 0, 0, 3, 1],
            [2, 3, 3, 1, 4, 4, 0, 2],
            [0, 4, 4, 3, 2, 2, 1, 2]
        ];
        // 关系区分
        let relationship;
        if (c === 1 || c === 2 || c === 3) {
            relationship = Y[upperTrigram][lowerTrigram];
        } else if (c === 0 || c === 4 || c === 5) {
            relationship = Y[lowerTrigram][upperTrigram];
        }
        const explanation = X[relationship];

        // 计算六爻卦象
        const hexagramIndex = lowerTrigram * 8 + upperTrigram;
        const hexagram = hexagrams[hexagramIndex];

        // 显示结果
        document.getElementById('upperTrigram').innerHTML = `${trigramSymbols[upperTrigram]} (${trigramNames[upperTrigram]}) (<span class="${trigramElementClasses[upperTrigram]}">${trigramElements[upperTrigram]}</span>)`;
        document.getElementById('lowerTrigram').innerHTML = `${trigramSymbols[lowerTrigram]} (${trigramNames[lowerTrigram]}) (<span class="${trigramElementClasses[lowerTrigram]}">${trigramElements[lowerTrigram]}</span>)`;
        document.getElementById('hexagramSymbol').textContent = hexagram.symbol;
        document.getElementById('hexagramName').textContent = hexagram.name;
        document.getElementById('relationship').textContent = relationship;
        document.getElementById('explanation').textContent = explanation;
        document.getElementById('hexagramJudgment').textContent = hexagram.judgment;

        // 高亮显示关系表中的对应数字
        const tableCells = document.querySelectorAll('#result table tbody tr');
        tableCells.forEach(row => {
            row.querySelectorAll('td').forEach(cell => {
                cell.classList.remove('highlight');
            });
        });
        const targetCell = document.querySelector(`#result table tbody tr:nth-child(${lowerTrigram + 1}) td:nth-child(${upperTrigram + 2})`);
        if (targetCell) {
            targetCell.classList.add('highlight');
        }

        document.getElementById('result').style.display = "block";
        document.getElementById('errorMessage').style.display = "none";
    }

    document.getElementById('divinationForm').addEventListener('submit', function(event) {
        event.preventDefault();
        cl();
    });
</script>
<!-- 引入不蒜子计数 -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<center>
        浏览量：<span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></span>👀 | 访客数：<span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></span>👦
</center>

</body>
</html>



